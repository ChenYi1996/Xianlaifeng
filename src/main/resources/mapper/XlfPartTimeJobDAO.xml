<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.xianlaifeng.ptj.dao.XlfPartTimeJobDAO">
    <resultMap id="BaseResultMap" type="com.xianlaifeng.ptj.entity.XlfPartTimeJob">
        <id  column="job_id" property="jobId" jdbcType="INTEGER"/>
        <result column="job_name" property="jobName" jdbcType="VARCHAR"/>
        <result column="limit_number" property="limitNumber" jdbcType="INTEGER"/>
        <result column="sex_demand" property="sexDemand" jdbcType="VARCHAR"/>
        <result column="job_type" property="jobType" jdbcType="VARCHAR"/>
        <result column="wage" property="wage" jdbcType="DECIMAL"/>
        <result column="wage_type" property="wageType" jdbcType="VARCHAR"/>
        <result column="work_street" property="workStreet" jdbcType="VARCHAR"/>
        <result column="calculate_money_type" property="calculateMoneyType" jdbcType="VARCHAR"/>
        <result column="calculate_money_date" property="calculateMoneyDate" jdbcType="VARCHAR"/>
        <result column="time_type" property="workStreet" jdbcType="VARCHAR"/>
        <result column="release_time" property="releaseTime" jdbcType="TIMESTAMP"/>
        <result column="end_work_date" property="endWorkDate" jdbcType="TIMESTAMP"/>
        <result column="start_work_date" property="startWorkDate" jdbcType="TIMESTAMP"/>
        <result column="job_content" property="jobContent" jdbcType="VARCHAR"/>
        <result column="audit_status" property="auditStatus" jdbcType="VARCHAR"/>
        <result column="user_id" property="userId" jdbcType="INTEGER"/>
        <result column="area_id" property="areaId" jdbcType="INTEGER"/>
        <result column="del_flag" property="delFlag" jdbcType="VARCHAR"/>
    </resultMap>
    <select id="selectDetails" parameterType="java.lang.String" resultType="java.util.Map">
        select
        p.* ,a.area_id,a.city,a.province,a.district
        from xlf_part_time_job AS  p
        left join xlf_area AS  a
        ON  p.area_id  = a.area_id
        where p.job_id = #{jobId}

    </select>

    <select id="findList" parameterType="com.xianlaifeng.ptj.entity.XlfPartTimeJob" resultMap="BaseResultMap">
        select *
        from xlf_part_time_job
        <where>
            <if test="jobName != null and jobName != ''">
                and job_Name  like '%${jobName}%'
            </if>
            <if test="areaIds != null and areaIds.size != 0 ">
                and area_id  in
                <foreach item="item" index="index" collection="areaIds" open="(" separator="," close=")">
                      #{item}
                </foreach>
            </if>
            <if test="jobTypes != null and jobTypes.size != 0">
                and job_type  IN 
                <foreach collection="jobTypes" index="index" item="item" open="(" separator="," close=")">
                      #{item}
                </foreach>
            </if>
            <if test="timeTypes != null and timeTypes.size != ''">
                and time_type IN 
                <foreach collection="timeTypes" index="index" item="item" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            
        </where>
        order by release_time desc
    </select>

    <insert id="add" parameterType="com.xianlaifeng.ptj.entity.XlfPartTimeJob">
        insert into xlf_part_time_job
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="jobName != null">
                job_name,
            </if>
            <if test="limitNumber != 0">
                limit_number,
            </if>
            <if test="jobType != null">
                job_type,
            </if>
            <if test="wage != null">
                wage,
            </if>
            <if test="wageType != null">
                wage_type,
            </if>
            <if test="calculateMoneyType != null">
                calculate_money_type,
            </if>
            <if test="calculateMoneyDate != null">
                calculate_money_date,
            </if>
            <if test="workStreet != null">
                work_street,
            </if>
            <if test="releaseTime != null">
                release_time,
            </if>
            <if test="startWorkDate != null">
                start_work_date,
            </if>
            <if test="endWorkDate != null">
                end_work_date,
            </if>
            <if test="jobContent != null">
                job_content,
            </if>
            <if test="auditStatus != null">
                audit_status,
            </if>
            <if test="userId != 0">
                user_id,
            </if>
            <if test="areaId != 0">
                area_id,
            </if>
            <if test="delFlag != null">
                del_flag,
            </if>
            <if test="sexDemand != null">
                sex_demand,
            </if>
        </trim>
        <trim prefix="values("  suffix=")" suffixOverrides=",">
            <if test="jobName != null">
                #{jobName},
            </if>
            <if test="limitNumber != 0">
                #{limitNumber},
            </if>
            <if test="jobType != null">
                #{jobType},
            </if>
            <if test="wage != null">
                #{wage},
            </if>
            <if test="wageType != null">
                #{wageType},
            </if>
            <if test="calculateMoneyType != null">
                #{calculateMoneyType},
            </if>
            <if test="calculateMoneyDate != null">
                #{calculateMoneyDate},
            </if>
            <if test="workStreet != null">
                #{workStreet},
            </if>
            <if test="releaseTime != null">
                #{releaseTime},
            </if>
            <if test="startWorkDate != null">
                #{startWorkDate},
            </if>
            <if test="endWorkDate != null">
               #{endWorkDate},
            </if>
            <if test="jobContent != null">
                #{jobContent},
            </if>
            <if test="auditStatus != null">
                #{auditStatus},
            </if>
            <if test="userId != 0">
                #{userId},
            </if>
            <if test="areaId != 0">
                #{areaId},
            </if>
            <if test="delFlag != null">
                #{delFlag},
            </if>
            <if test="sexDemand != null">
                #{sexDemand},
            </if>
        </trim>
    </insert>
</mapper>